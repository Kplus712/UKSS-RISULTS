<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UKSS — School Results Form</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body{
      margin:0;
      background:#02201a;
      font-family: "Segoe UI",system-ui,-apple-system,sans-serif;
    }
    /* toolbar (haitaprint) */
    .toolbar{
      padding:8px 12px;
      background:#020617;
      color:#e5e7eb;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
      justify-content:space-between;
    }
    .toolbar-left{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:flex-end;
    }
    .field{
      display:flex;
      flex-direction:column;
      font-size:13px;
      color:#cbd5f5;
    }
    .field label{margin-bottom:2px;}
    .field select{
      min-width:160px;
    }
    .btn{
      padding:6px 12px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:13px;
      font-weight:600;
    }
    .btn-primary{
      background:linear-gradient(90deg,#22c55e,#16a34a);
      color:#022c22;
    }
    .btn-ghost{
      background:transparent;
      color:#e5e7eb;
      border:1px solid rgba(148,163,184,0.5);
    }

    /* A4 sheet style */
    .sheet-wrap{
      display:flex;
      justify-content:center;
      padding:16px;
    }
    .sheet{
      width:1120px;
      background:#fff8dc; /* light yellow */
      border:2px solid #000;
      padding:10px 12px 16px;
      box-shadow:0 18px 40px rgba(0,0,0,0.7);
    }

    .sheet-header{
      text-align:center;
      font-size:11px;
      line-height:1.3;
      margin-bottom:8px;
    }
    .sheet-header strong{
      display:block;
      text-transform:uppercase;
    }
    .sheet-header .exam-title{
      margin-top:4px;
      font-weight:700;
      text-transform:uppercase;
    }

    .meta-bar{
      font-size:10px;
      text-transform:uppercase;
      margin-bottom:6px;
    }

    table.nec-table{
      width:100%;
      border-collapse:collapse;
      font-size:10px;
    }
    .nec-table th,
    .nec-table td{
      border:1px solid #000;
      padding:3px 4px;
      text-align:center;
    }
    .nec-table th{
      background:#facc6b;
      font-weight:700;
    }
    .nec-table td.left,
    .nec-table th.left{
      text-align:left;
    }

    .block-title{
      text-align:center;
      font-size:10px;
      font-weight:700;
      text-transform:uppercase;
      margin:4px 0;
    }

    .centre-table{
      margin-bottom:6px;
    }

    .subject-wrapper{
      margin-top:4px;
    }

    .badge{
      display:inline-block;
      padding:1px 4px;
      border-radius:8px;
      font-size:9px;
      border:1px solid #000;
    }
    .badge-good{background:#bbf7d0;}
    .badge-avg{background:#facc15;}
    .badge-poor{background:#fecaca;}

    @media print{
      body{background:#ffffff;}
      .toolbar{display:none;}
      .sheet-wrap{padding:0;}
      .sheet{
        width:100%;
        box-shadow:none;
        border-width:1px;
      }
    }
  </style>
</head>
<body>

<!-- TOP TOOLBAR (haiprintwi) -->
<div class="toolbar">
  <div class="toolbar-left">
    <div style="font-weight:700;font-size:14px;">UKSS — School Results Form</div>
    <div class="field">
      <label>Exam</label>
      <select id="examSelect" class="input">
        <!-- itajazwa na JS kwa kutumia exam_id tofauti zilizopo kwenye report_cards -->
      </select>
    </div>
    <button id="loadBtn" class="btn btn-primary">Load Results</button>
  </div>
  <div>
    <button class="btn btn-ghost" onclick="window.location.href='academic.html'">← Academic</button>
    <button class="btn btn-primary" onclick="window.print()">Print</button>
  </div>
</div>

<!-- MAIN SHEET -->
<div class="sheet-wrap">
  <div class="sheet">
    <!-- HEADER kama NECTA -->
    <div class="sheet-header">
      <strong>PRESIDENT OFFICE</strong>
      <strong>REGIONAL ADMINISTRATION AND LOCAL GOVERNMENT</strong>
      <strong>HALMASHAURI YA WILAYA YA KIBAHA</strong>
      <strong>UMOJA KINGORI SECONDARY SCHOOL</strong>
      <div class="exam-title" id="examTitle">
        EXAMINATION NAME / YEAR
      </div>
    </div>

    <div class="meta-bar">
      CENTRE: <span id="centreName">UMOJA KINGORI</span> &nbsp;&nbsp;
      EXAM ID: <span id="examIdLabel">-</span> &nbsp;&nbsp;
      CLASS(ES): <span id="classLabel">ALL</span> &nbsp;&nbsp;
      CANDIDATES DATA FROM SYSTEM
    </div>

    <!-- BLOCK 1: CENTRE OVERALL PERFORMANCE -->
    <div class="block-title">EXAMINATION CENTRE OVERALL PERFORMANCE</div>
    <table class="nec-table centre-table">
      <tbody>
      <tr>
        <th class="left" style="width:60%;">TOTAL CANDIDATES</th>
        <td id="ctTotal"></td>
      </tr>
      <tr>
        <th class="left">TOTAL CANDIDATES PASSED</th>
        <td id="ctPassed"></td>
      </tr>
      <tr>
        <th class="left">% OF TOTAL PASSED CANDIDATES</th>
        <td id="ctPercent"></td>
      </tr>
      <tr>
        <th class="left">CENTRE GPA</th>
        <td id="ctGpa"></td>
      </tr>
      <tr>
        <th class="left">COMPETENCY LEVEL</th>
        <td id="ctLevel"></td>
      </tr>
      </tbody>
    </table>

    <!-- BLOCK 2: SUBJECT PERFORMANCE -->
    <div class="block-title">EXAMINATION CENTRE OVERALL SUBJECT PERFORMANCE</div>
    <div class="subject-wrapper">
      <table class="nec-table" id="subjectTable">
        <thead>
        <tr>
          <th rowspan="2" class="left">SUBJECTS</th>
          <th rowspan="2">REG</th>
          <th rowspan="2">SAT</th>
          <th rowspan="2">ABS</th>
          <th colspan="6">GRADE SUMMARY</th>
          <th rowspan="2">GPA</th>
          <th rowspan="2">COMPETENCY LEVEL</th>
          <th rowspan="2">RANK</th>
        </tr>
        <tr>
          <th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th>
        </tr>
        </thead>
        <tbody>
        <tr><td colspan="13">Hakuna data bado. Chagua exam kisha bofya "Load Results".</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script src="js/database.js"></script>
<script src="js/school_results.js"></script>
</body>
</html>

