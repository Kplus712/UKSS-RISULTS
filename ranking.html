<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UKSS — Class Ranking</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Print-style wrapper (A4 look) */
    body{
      background:#00130f;
      color:#e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .rank-wrap{
      max-width:1000px;
      margin:16px auto;
      background:#03211a;
      border-radius:12px;
      padding:16px 18px 22px;
      box-shadow:0 18px 40px rgba(0,0,0,0.6);
      border:1px solid rgba(148,163,184,0.3);
    }
    .rank-header{
      text-align:center;
      margin-bottom:10px;
      font-size:14px;
    }
    .rank-header strong{
      display:block;
    }
    .rank-meta{
      display:flex;
      justify-content:space-between;
      font-size:12px;
      margin:6px 0 10px;
    }
    .rank-meta div{min-width:0;}
    .rank-actions{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
      gap:8px;
      font-size:12px;
    }
    .rank-actions .btn{
      padding:6px 12px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:12px;
      font-weight:600;
    }
    .btn-primary{
      background:linear-gradient(90deg,#22c55e,#16a34a);
      color:#022c22;
    }
    .btn-ghost{
      background:rgba(15,23,42,0.6);
      color:#e5e7eb;
      border:1px solid rgba(148,163,184,0.4);
    }
    .rank-table-wrap{
      overflow-x:auto;
      background:#020b09;
      border-radius:10px;
      border:1px solid rgba(148,163,184,0.25);
    }
    table.rank-table{
      width:100%;
      border-collapse:collapse;
      font-size:11px;
    }
    .rank-table th,
    .rank-table td{
      padding:4px 6px;
      border:1px solid rgba(30,64,94,0.8);
      white-space:nowrap;
    }
    .rank-table th{
      background:#0f172a;
      color:#f9fafb;
      text-align:center;
      font-weight:700;
    }
    .rank-table td{
      background:#020617;
    }
    .rank-table tr:nth-child(even) td{
      background:#02091b;
    }
    .tag-top{background:#166534;color:#bbf7d0;padding:1px 4px;border-radius:4px;font-size:10px;}
    .tag-last{background:#b91c1c;color:#fee2e2;padding:1px 4px;border-radius:4px;font-size:10px;}

    @media print{
      body{background:#fff;color:#000;}
      .rank-wrap{
        margin:0;
        max-width:none;
        box-shadow:none;
        border:none;
        border-radius:0;
      }
      .rank-actions{display:none;}
      .rank-table-wrap{border-color:#000;}
      .rank-table th,
      .rank-table td{border-color:#000;}
    }
  </style>
</head>
<body>

<div class="rank-wrap">
  <div class="rank-header">
    <strong>PRESIDENT’S OFFICE – REGIONAL ADMINISTRATION AND LOCAL GOVERNMENT</strong>
    <strong>UMOJA KINGORI SECONDARY SCHOOL</strong>
    <span id="rankExamTitle">CLASS RANKING</span>
  </div>

  <div class="rank-meta">
    <div>
      <div>Exam: <strong id="metaExam"></strong></div>
      <div>Class: <strong id="metaClass"></strong></div>
    </div>
    <div style="text-align:right;">
      <div>Total Students: <strong id="metaTotal">0</strong></div>
      <div>Printed: <strong id="metaPrinted"></strong></div>
    </div>
  </div>

  <div class="rank-actions">
    <div>
      View:
      <select id="viewMode" class="input-inline">
        <option value="all">All students</option>
        <option value="top_last">Top 10 & Last 10</option>
      </select>
    </div>
    <div>
      <button class="btn btn-ghost" onclick="window.location.href='academic.html'">← Back to Academic</button>
      <button class="btn btn-primary" onclick="window.print()">Print</button>
    </div>
  </div>

  <div class="rank-table-wrap">
    <table class="rank-table" id="rankingTable">
      <thead>
        <tr>
          <th>NO</th>
          <th>ADM</th>
          <th>STUDENT NAME</th>
          <th>SEX</th>
          <th>CLASS</th>
          <th>TOTAL</th>
          <th>AVG</th>
          <th>GRADE</th>
          <th>POSITION</th>
          <th>REMARK</th>
          <th>FLAG</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="11" style="text-align:center;">Loading ranking...</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script src="js/database.js"></script>
<script src="js/ranking.js"></script>
</body>
</html>

