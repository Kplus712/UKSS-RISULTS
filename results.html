<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UKSS â€” Results</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

<div class="app">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="brand">
      <div class="brand-badge">UK</div>
      <div>
        <div class="brand-title">UKSS</div>
        <div class="brand-sub">Results Management</div>
      </div>
    </div>

<nav class="nav">
  <a href="marks.html">ğŸ  Marks</a>
  <a href="results.html">ğŸ“„ Results</a>
  <a href="ranking.html">ğŸ† Ranking</a>
  <a href="behaviour.html">ğŸ§­ Behaviour</a>
  <a href="sms.html">ğŸ“¨ SMS</a>
  <a href="sms_logs.html">ğŸ§¾ SMS Logs</a>
  <a href="school_results.html">ğŸ“Š School Results</a>
  <a href="admin.html">ğŸ” Admin</a>
</nav>
</aside>

  <!-- MAIN -->
  <main class="main">
    <header class="topbar">
      <div>
        <h2>ğŸ“„ Results</h2>
        <p class="small">Search student report cards by class, exam or admission number.</p>
      </div>

      <div class="top-actions">
        <button id="logoutBtn" class="btn btn-ghost">Logout</button>
      </div>
    </header>

    <!-- FILTERS -->
    <section class="card">
      <div class="row row-wrap">
        <div class="field">
          <label class="label">Exam</label>
          <select id="examSelect" class="input">
            <!-- kwa sasa tunatumia exam moja -->
            <option value="annual_2025">annual_2025</option>
          </select>
        </div>

        <div class="field">
          <label class="label">Class</label>
          <select id="classSelect" class="input">
            <option value="">All classes</option>
          </select>
        </div>

        <div class="field">
          <label class="label">Search (name or admission)</label>
          <input id="searchBox" class="input" placeholder="eg. ADM001 or Kelvin" />
        </div>

        <button id="filterBtn" class="btn btn-primary">Apply Filters</button>
      </div>
    </section>

    <!-- RESULTS TABLE -->
    <section class="card">
      <h3>Report Cards</h3>
      <div class="matrix-wrap">
        <table class="table" id="resultsTable">
          <thead>
          <tr>
            <th>Adm</th>
            <th>Student</th>
            <th>Class</th>
            <th>Total</th>
            <th>Mean</th>
            <th>Grade</th>
            <th>Report</th>
          </tr>
          </thead>
          <tbody>
          <tr><td colspan="7">No reports yet. Generate reports from Marks page.</td></tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
</div>

<!-- REPORT CARD MODAL -->
<div id="reportOverlay" class="overlay hidden">
  <div class="overlay-card">
    <div class="overlay-header">
      <h3>Student Report Card</h3>
      <button id="closeReportBtn" class="btn btn-ghost">Close</button>
    </div>

    <div class="report-body">
      <p><strong>Name:</strong> <span id="rpName"></span></p>
      <p><strong>Admission:</strong> <span id="rpAdm"></span></p>
      <p><strong>Class:</strong> <span id="rpClass"></span></p>
      <p><strong>Exam:</strong> <span id="rpExam"></span></p>

      <h4 style="margin-top:10px;">Subject Performance</h4>
      <table class="table" id="rpSubjectsTable">
        <thead>
        <tr>
          <th>Subject</th>
          <th>CA</th>
          <th>Exam</th>
          <th>Total</th>
        </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div style="margin-top:10px;">
        <p><strong>Total:</strong> <span id="rpTotal"></span></p>
        <p><strong>Mean:</strong> <span id="rpMean"></span></p>
        <p><strong>Grade:</strong> <span id="rpGrade"></span></p>
        <p><strong>Weak Subjects:</strong> <span id="rpWeak"></span></p>
      </div>

      <h4 style="margin-top:12px;">Behaviour & Comments</h4>
      <div>
        <p>
          <strong>Behaviour ratings:</strong><br/>
          <span id="rpBehaviour"></span>
        </p>
        <p><strong>Class Teacher Comment:</strong> <span id="rpTeacherComment"></span></p>
        <p><strong>Head of School Comment:</strong> <span id="rpHeadComment"></span></p>
      </div>

      <button id="printBtn" class="btn btn-primary" style="margin-top:12px;">Print</button>
    </div>
  </div>
</div>


<!-- Firebase CDN v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<!-- App scripts -->
<script src="./js/database.js"></script>
<script src="./js/report.js"></script>
</body>
</html>
