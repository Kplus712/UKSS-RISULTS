<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UKSS — Report Form</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body{
      background:#00130f;
      color:#0f172a;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .report-shell{
      max-width:980px;
      margin:16px auto;
      padding:0 12px 32px;
    }
    .report-toolbar{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:flex-end;
      justify-content:space-between;
      margin-bottom:10px;
      color:#e5e7eb;
    }
    .toolbar-group{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .toolbar-field{
      display:flex;
      flex-direction:column;
      font-size:12px;
    }
    .toolbar-field label{
      margin-bottom:2px;
    }
    .toolbar-field select{
      min-width:130px;
    }
    .btn-sm{
      padding:6px 10px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      font-size:12px;
      font-weight:600;
    }
    .btn-primary-sm{
      background:linear-gradient(90deg,#22c55e,#16a34a);
      color:#022c22;
    }
    .btn-ghost-sm{
      background:rgba(15,23,42,0.6);
      color:#e5e7eb;
      border:1px solid rgba(148,163,184,0.4);
    }

    .report-card{
      background:#ffffff;
      color:#0f172a;
      border-radius:12px;
      padding:16px 18px 18px;
      box-shadow:0 16px 36px rgba(0,0,0,0.55);
      border:1px solid #cbd5e1;
    }
    .rep-header{
      text-align:center;
      font-size:12px;
      line-height:1.3;
      margin-bottom:4px;
    }
    .rep-header strong{
      display:block;
    }
    .rep-title{
      text-align:center;
      font-weight:700;
      font-size:12px;
      margin-bottom:8px;
      text-transform:uppercase;
    }
    .rep-meta-row{
      display:flex;
      flex-wrap:wrap;
      font-size:11px;
      border:1px solid #000;
      border-bottom:none;
    }
    .rep-meta-row > div{
      border-right:1px solid #000;
      padding:4px 4px;
      flex:1;
      min-width:130px;
    }
    .rep-meta-row > div:last-child{
      border-right:none;
    }
    .meta-label{
      font-weight:600;
      text-transform:uppercase;
      font-size:10px;
    }
    .meta-value{
      font-size:11px;
    }

    .rep-table{
      width:100%;
      border-collapse:collapse;
      font-size:11px;
      margin-top:6px;
    }
    .rep-table th,
    .rep-table td{
      border:1px solid #000;
      padding:3px 4px;
      text-align:center;
    }
    .rep-table th{
      background:#e5e7eb;
      font-size:10px;
    }
    .rep-table td.subj-name{
      text-align:left;
    }

    .rep-footer-blocks{
      border:1px solid #000;
      border-top:none;
      font-size:10px;
      margin-top:4px;
    }
    .rep-footer-row{
      display:flex;
      border-top:1px solid #000;
    }
    .rep-footer-row:first-child{
      border-top:none;
    }
    .rep-footer-cell{
      flex:1;
      border-right:1px solid #000;
      padding:3px 4px;
    }
    .rep-footer-cell:last-child{
      border-right:none;
    }

    .rep-sign-row{
      display:flex;
      font-size:10px;
      margin-top:10px;
      gap:12px;
    }
    .rep-sign-col{
      flex:1;
    }
    .rep-sign-label{
      font-weight:600;
      margin-bottom:18px;
    }
    .rep-sign-line{
      border-bottom:1px solid #000;
      height:14px;
      margin-top:4px;
    }
    .rep-note{
      font-size:9px;
      margin-top:4px;
    }

    @media print{
      body{
        background:#fff;
      }
      .report-shell{
        margin:0;
        max-width:none;
        padding:0;
      }
      .report-toolbar{display:none;}
      .report-card{
        border-radius:0;
        box-shadow:none;
      }
    }
  </style>
</head>
<body>

<div class="report-shell">

  <!-- TOOLBAR (filters + print) -->
  <div class="report-toolbar">
    <div class="toolbar-group">
      <div class="toolbar-field">
        <label>Exam</label>
        <select id="examSelect" class="input"></select>
      </div>
      <div class="toolbar-field">
        <label>Class</label>
        <select id="classSelect" class="input"></select>
      </div>
      <div class="toolbar-field">
        <label>Student</label>
        <select id="studentSelect" class="input"></select>
      </div>
    </div>

    <div class="toolbar-group">
      <button class="btn-sm btn-ghost-sm" onclick="window.location.href='academic.html'">← Academic</button>
      <button id="prevBtn" class="btn-sm btn-ghost-sm">Prev</button>
      <button id="nextBtn" class="btn-sm btn-ghost-sm">Next</button>
      <button class="btn-sm btn-primary-sm" onclick="window.print()">Print</button>
    </div>
  </div>

  <!-- REPORT CARD -->
  <div class="report-card" id="reportCard">
    <div class="rep-header">
      <strong>OFISI YA RAIS TAMISEMI</strong>
      <strong>HALMASHAURI YA WILAYA YA KIBAHA</strong>
      <strong>SHULE YA SEKONDARI UMOJA KINGORI</strong>
      <span id="repExamTitle">TAARIFA YA MAENDELEO YA TAALUMA NA TABIA ZA MWANAFUNZI</span>
    </div>

    <div class="rep-title">
      <span id="repExamName">TERM / EXAM NAME HERE</span>
    </div>

    <!-- Meta rows -->
    <div class="rep-meta-row">
      <div>
        <div class="meta-label">Jina la Mwanafunzi</div>
        <div class="meta-value" id="metaStudentName"></div>
      </div>
      <div>
        <div class="meta-label">Namba ya Mtahiniwa / Kidato</div>
        <div class="meta-value" id="metaAdmForm"></div>
      </div>
      <div>
        <div class="meta-label">Jinsia</div>
        <div class="meta-value" id="metaSex"></div>
      </div>
      <div>
        <div class="meta-label">Darasa</div>
        <div class="meta-value" id="metaClass"></div>
      </div>
    </div>

    <div class="rep-meta-row">
      <div>
        <div class="meta-label">Mwalimu wa Darasa</div>
        <div class="meta-value" id="metaClassTeacher"></div>
      </div>
      <div>
        <div class="meta-label">Mawasiliano ya Ofisi ya Taaluma</div>
        <div class="meta-value">Simu: 06XX XXX XXX</div>
      </div>
      <div>
        <div class="meta-label">Tarehe ya Mtihani</div>
        <div class="meta-value" id="metaExamDate"></div>
      </div>
      <div>
        <div class="meta-label">Mwaka</div>
        <div class="meta-value" id="metaYear"></div>
      </div>
    </div>

    <!-- SUBJECT TABLE -->
    <table class="rep-table" id="subjectsTable">
      <thead>
        <tr>
          <th>S/No</th>
          <th>MADA / SOMO</th>
          <th>ALAMA</th>
          <th>DARAJA</th>
          <th>MAONI YA MWALIMU WA SOMO</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="5">Inapakia taarifa za masomo...</td></tr>
      </tbody>
    </table>

    <!-- TOTALS & BEHAVIOUR -->
    <div class="rep-footer-blocks">
      <div class="rep-footer-row">
        <div class="rep-footer-cell">
          JUMLA YA ALAMA: <strong id="metaTotal"></strong><br/>
          WASTANI WA ALAMA: <strong id="metaMean"></strong><br/>
          DARAJA LA JUMLA: <strong id="metaGrade"></strong><br/>
          NAFASI KLASINI: <strong id="metaPosition"></strong>
        </div>
        <div class="rep-footer-cell">
          MAELEZO YA MWALIMU WA DARASA:<br/>
          <span id="metaClassRemark"></span>
        </div>
        <div class="rep-footer-cell">
          MWENENDO WA TABIA:<br/>
          <span id="metaBehaviour"></span>
        </div>
      </div>

      <div class="rep-footer-row">
        <div class="rep-footer-cell">
          SHULE IMEFUNGWA TAREHE: <span id="metaClosed"></span>
        </div>
        <div class="rep-footer-cell">
          SHULE ITAFUNGULIWA TAREHE: <span id="metaOpening"></span>
        </div>
        <div class="rep-footer-cell">
          MAELEKEZO MENGINE YA TAALUMA:<br/>
          <span id="metaAdvice"></span>
        </div>
      </div>
    </div>

    <!-- SIGNATURES -->
    <div class="rep-sign-row">
      <div class="rep-sign-col">
        <div class="rep-sign-label">MAONI YA MZAZI / MLEZI</div>
        <div class="rep-sign-line"></div>
        <div class="rep-note">Jina: .......................................................... Tarehe: ........................</div>
      </div>
      <div class="rep-sign-col">
        <div class="rep-sign-label">SAHIHI YA MKUU WA SHULE</div>
        <div class="rep-sign-line"></div>
        <div class="rep-note">Jina: ..........................................................</div>
      </div>
      <div class="rep-sign-col">
        <div class="rep-sign-label">MUHURI WA SHULE</div>
        <div class="rep-sign-line"></div>
      </div>
    </div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script src="js/database.js"></script>
<script src="js/report.js"></script>
</body>
</html>
