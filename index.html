<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>UKSS Results System — Staff Login</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(135deg,#3454f5,#2c3de8);
  color:#fff;
}

/* ================= SCENE ================= */
.scene{
  position:relative;
  width:100%;
  height:100vh;
}

/* ================= CHARACTER ================= */
.character{
  position:absolute;
  bottom:60px;
  left:-260px;
  width:220px;
  transition:transform .6s ease;
}
.character img{width:100%;display:block}

/* walking */
.character.walk{
  animation:walkIn 3.2s linear forwards;
}

/* idle bounce */
.character.idle{
  animation:idle 2.4s ease-in-out infinite;
}

/* bag */
.bag{
  position:absolute;
  bottom:-10px;
  left:50px;
  width:90px;
  opacity:0;
  transition:opacity .4s ease;
}
.bag.show{opacity:1}

/* ================= LOGIN CARD ================= */
.login-card{
  position:absolute;
  right:110px;
  top:50%;
  transform:translateY(-50%) translateX(60px);
  width:380px;
  background:linear-gradient(180deg,#0b3f2b,#07291f);
  padding:28px;
  border-radius:20px;
  box-shadow:0 25px 60px rgba(0,0,0,.45);
  opacity:0;
  transition:.8s ease;
}
.login-card.show{
  opacity:1;
  transform:translateY(-50%) translateX(0);
}

.login-card h1{margin:0;font-size:20px}
.sub{font-size:13px;opacity:.85;margin-bottom:14px}

label{font-size:13px;margin-top:12px;display:block}
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:0;
  margin-top:6px;
  background:#041c15;
  color:#eafff3;
}

button{
  width:100%;
  margin-top:16px;
  padding:14px;
  border-radius:999px;
  border:0;
  background:#22c55e;
  color:#01210d;
  font-weight:700;
  font-size:16px;
  cursor:pointer;
}

.error{color:#ffb4b4;font-size:13px;min-height:18px;margin-top:10px}
.foot{font-size:12px;opacity:.7;margin-top:14px;text-align:center}

/* ================= MOBILE ================= */
@media(max-width:900px){
  .character{display:none}
  .login-card{
    right:50%;
    transform:translate(50%,-50%);
    opacity:1;
  }
}

/* ================= KEYFRAMES ================= */
@keyframes walkIn{
  from{transform:translateX(0)}
  to{transform:translateX(520px)}
}
@keyframes idle{
  0%,100%{transform:translateX(520px) translateY(0)}
  50%{transform:translateX(520px) translateY(-10px)}
}
</style>
</head>

<body>

<div class="scene">

  <!-- CHARACTER -->
  <div id="character" class="character walk">
    <img id="charImg" src="./assets/teacher-walk.png" alt="Teacher"/>
    <img id="bag" src="./assets/bag.png" class="bag" alt="Bag"/>
  </div>

  <!-- LOGIN -->
  <form id="loginForm" class="login-card" autocomplete="on" novalidate>
    <h1>UKSS Results System</h1>
    <div class="sub">UMOJA KINGORI SECONDARY — Staff Login</div>

    <label>Email</label>
    <input id="email" type="email" placeholder="you@school.ac.tz" required>

    <label>Password</label>
    <input id="password" type="password" placeholder="********" required>

    <button type="submit">Login</button>
    <div id="loginError" class="error"></div>

    <div class="foot">
      Accounts husimamiwa na Admin.<br>
      Ukisahau password, mwone Academic Officer / Headmaster.
    </div>
  </form>

</div>

<!-- ================= SOUNDS ================= -->
<audio id="stepSound" src="./assets/step.mp3" preload="auto"></audio>
<audio id="dropSound" src="./assets/drop.mp3" preload="auto"></audio>

<!-- ================= FIREBASE ================= -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script src="./js/database.js"></script>
<script src="./js/auth.js"></script>

<!-- ================= ANIMATION LOGIC ================= -->
<script>
document.addEventListener("DOMContentLoaded",()=>{

  const character = document.getElementById("character");
  const img = document.getElementById("charImg");
  const bag = document.getElementById("bag");
  const card = document.getElementById("loginForm");
  const step = document.getElementById("stepSound");
  const drop = document.getElementById("dropSound");

  // STEP SOUND LOOP
  let stepInterval = setInterval(()=> step.play(), 600);

  // AFTER WALK
  setTimeout(()=>{
    clearInterval(stepInterval);
    step.pause(); step.currentTime=0;

    // DROP BAG
    bag.classList.add("show");
    drop.play();

    // SWITCH TO WAVE POSE
    setTimeout(()=>{
      img.src="./assets/teacher-wave.png";

      // IDLE
      character.classList.add("idle");

      // SHOW LOGIN
      setTimeout(()=>{
        card.classList.add("show");
      },600);

    },700);

  },3200);

});
</script>

</body>
</html>

